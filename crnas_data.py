from dataclasses import dataclass
from typing import List, Tuple, Dict

# ==========================================
# DATA STRUCTURES
# ==========================================

@dataclass
class ScenarioOption:
    text: str
    # Ваги додаються до категорій: (Safety, Resource, Resonance, Expansion)
    # Значення від -1.0 до 1.0
    weights: Tuple[float, float, float, float] 

@dataclass
class Scenario:
    id: str
    question: str
    description: str  # Пояснення, що саме перевіряє це питання
    options: List[ScenarioOption]

# ==========================================
# SCIENTIFIC EXPLANATIONS (CONTENT)
# ==========================================

EXPLANATIONS = {
    "big_five_intro": """
    **Модель Big Five (OCEAN)** — це золотий стандарт сучасної психометрії. 
    В контексті стосунків ці риси визначають "операційну систему" вашої психіки.
    
    *Введіть свої значення за шкалою 0-100 (Т-бали), де 50 — це середнє значення по популяції.*
    """,
    
    "openness": """
    **Відкритість до досвіду (Openness)**
    * **Високий (>70):** Потреба в інтелектуальній стимуляції, філософських розмовах, новизні. Рутина вбиває лібідо.
    * **Низький (<30):** Любов до традицій, конкретики, перевірених методів. Абстрактні розмови втомлюють.
    """,
    
    "conscientiousness": """
    **Сумлінність (Conscientiousness)**
    * **Високий (>70):** Порядок, планування, надійність. Може дратуватися через хаос партнера.
    * **Низький (<30):** Гнучкість, спонтанність, але проблеми з виконанням обіцянок та побутом.
    * *Примітка:* При РДУГ цей показник часто занижений не через небажання, а через виконавчу дисфункцію.
    """,
    
    "extraversion": """
    **Екстраверсія (Extraversion)**
    * **Високий (>70):** Відновлення енергії через спілкування. Потреба в активному дозвіллі разом.
    * **Низький (<30):** Відновлення на самоті. "Багато людей" = стрес.
    """,
    
    "agreeableness": """
    **Приємність/Доброзичливість (Agreeableness)**
    * **Високий (>70):** Емпатія, уникнення конфліктів, жертовність. Потреба в емоційному резонансі.
    * **Низький (<30):** Скептицизм, пряма конкуренція, любов до дебатів. "Істина важливіша за почуття".
    """,
    
    "neuroticism": """
    **Невротизм (Neuroticism)**
    * **Високий (>70):** Глибина емоцій, але висока тривожність. Критична потреба в Безпеці (Safety) та передбачуваності.
    * **Низький (<30):** Емоційна стабільність, "товстошкірість". Може не помічати емоційних потреб партнера.
    """,
    
    "shadow_intro": """
    **Тіньовий компонент** базується на Теорії Прив'язаності (Боулбі/Ейнсворт) та дослідженні конфліктів (Готтман).
    Це те, як ви поводитесь, коли ви **налякані, втомлені або злі**.
    """,
    
    "eros_intro": """
    **Eros Component** базується на Моделі Подвійного Контролю (Dual Control Model) Емілі Нагоскі.
    Сексуальний темперамент складається з двох незалежних систем:
    1.  **Акселератор (SES):** Як легко ви помічаєте еротичні стимули?
    2.  **Гальма (SIS):** Наскільки сильно стрес, брудний посуд чи шум блокують збудження?
    """
}

# ==========================================
# SCENARIOS DATABASE
# ==========================================

def get_scenarios() -> List[Scenario]:
    return [
        Scenario(
            id="conf_logic", 
            question="Конфлікт істини vs Емоцій",
            description="Це питання перевіряє пріоритет між Когнітивним Резонансом (пошук істини) та Емоційною Безпекою.",
            options=[
                ScenarioOption(
                    text="Я відчуваю паніку/біль, якщо партнер підвищує голос або емоційно тисне.", 
                    weights=(0.6, 0.0, 0.0, -0.1) # Висока потреба в Safety
                ),
                ScenarioOption(
                    text="Мене бісить, коли партнер ігнорує логіку. Я буду сперечатися до перемоги фактів.", 
                    weights=(0.0, 0.0, 0.6, 0.0) # Висока потреба в Resonance (Cognitive)
                ),
                ScenarioOption(
                    text="Я просто закриваюсь у собі (shutdown), щоб перечекати бурю.", 
                    weights=(0.3, 0.0, 0.0, 0.0) # Safety (Withdrawal strategy)
                )
            ]
        ),
        Scenario(
            id="stress_support", 
            question="Мова підтримки (Support Language)",
            description="Визначає, який тип Ресурсу вам потрібен у стані вигорання.",
            options=[
                ScenarioOption(
                    text="Дієва допомога: 'Я зробив це за тебе/замовив їжу'. (Acts of Service)", 
                    weights=(0.0, 0.6, 0.0, 0.0) # Resource (Instrumental)
                ),
                ScenarioOption(
                    text="Емоційна валідація: 'Я розумію, як тобі важко, йди сюди'. (Co-regulation)", 
                    weights=(0.5, 0.0, 0.3, 0.0) # Safety + Resonance
                ),
                ScenarioOption(
                    text="Аналітична допомога: 'Давай розберемо проблему і знайдемо рішення'.", 
                    weights=(0.0, 0.2, 0.4, 0.0) # Resonance (Problem solving)
                )
            ]
        ),
        Scenario(
            id="boredom_dopamine", 
            question="Толерантність до нудьги (Novelty Seeking)",
            description="Перевіряє потребу в Експансії. Критично для людей з високим Openness або РДУГ.",
            options=[
                ScenarioOption(
                    text="Рутина — це безпека. Я люблю знати, що буде завтра.", 
                    weights=(0.4, 0.0, 0.0, -0.3) # Safety, Low Expansion
                ),
                ScenarioOption(
                    text="Якщо нічого нового не відбувається тиждень, я починаю відчувати 'свербіж' і провокую зміни.", 
                    weights=(-0.1, 0.0, 0.0, 0.7) # High Expansion
                ),
                ScenarioOption(
                    text="Мені не треба пригод, але мені треба постійний потік нової інформації/ідей для обговорення.", 
                    weights=(0.0, 0.0, 0.5, 0.2) # Resonance + Moderate Expansion
                )
            ]
        ),
        Scenario(
            id="autonomy_fusion", 
            question="Автономія проти Злиття",
            description="Визначає дистанцію у стосунках. Чи є ви 'Ми' чи 'Я + Я'?",
            options=[
                ScenarioOption(
                    text="Ми маємо все робити разом. Якщо партнер їде у відпустку сам — це підозріло/боляче.", 
                    weights=(0.5, 0.0, 0.2, -0.2) # Safety (Fusion)
                ),
                ScenarioOption(
                    text="Мені життєво необхідний час наодинці для моїх проєктів. Це не про нелюбов, це про зарядку.", 
                    weights=(0.0, 0.0, 0.0, 0.6) # Expansion (Autonomy)
                ),
                ScenarioOption(
                    text="Паралельна гра: ми в одній кімнаті, але кожен займається своїм.", 
                    weights=(0.2, 0.0, 0.3, 0.1) # Balanced Resonance
                )
            ]
        ),
        Scenario(
            id="mess_tolerance", 
            question="Побут та Ентропія",
            description="Важливе питання для діагностики потреби в Ресурсі (Structure).",
            options=[
                ScenarioOption(
                    text="Безлад мене фізично виснажує. Мені потрібен порядок, щоб думати.", 
                    weights=(0.0, 0.3, 0.0, 0.0) # Resource (Environment)
                ),
                ScenarioOption(
                    text="Я не помічаю безладу, поки не спіткнусь. Мені байдуже.", 
                    weights=(0.0, -0.2, 0.0, 0.2) # Low Resource demand (or chaos source)
                ),
                ScenarioOption(
                    text="Мені важко підтримувати порядок (РДУГ/Втома), тому мені потрібен партнер, який організує систему.", 
                    weights=(0.0, 0.8, 0.0, 0.0) # High Resource Dependency
                )
            ]
        )
    ]